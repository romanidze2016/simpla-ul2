<link rel="import" href="../polymer/polymer.html"> <dom-module id="simpla-ul"> <script>!function(){"use strict";window.SimplaConnector={properties:{uid:{type:String,observer:"_observeAndInitUid"}},observers:["_syncInnerToSimpla(inner)"],_syncInnerToSimpla:function(i){console.log(i),Simpla.set(this.uid,{type:this.is,data:i})},attached:function(){this._observeAndInitEditable(),this._observeAndInitUid()},detached:function(){this._unobserveEditable&&this._unobserveEditable(),this._unobserveUid&&this._unobserveUid()},_observeAndInitEditable:function(){var i=this,e=function(e){i.editable=e};this._unobserveEditable=Simpla.observeState("editable",e),e(Simpla.getState().editable)},_observeAndInitUid:function(){var i=this;this._unobserveUid&&this._unobserveUid(),this.uid&&(this._unobserveUid=Simpla.observe(this.uid,function(e){var t=e.data;i.inner=t}),Simpla.get(this.uid))}}}()</script> <template> <style>*,::after,::before,:host{box-sizing:border-box;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased}:host{display:block}</style> <content></content> </template> <script>!function(){"use strict";var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),n=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},r=function(r){function o(){return e(this,o),i(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return n(o,r),t(o,[{key:"beforeRegister",value:function(){this.is="simpla-ul",this["extends"]="ul",this.properties={inner:{type:String,observer:"_innerChanged"},active:{type:Boolean,notify:!0,value:!1,observer:"_activeChanged",reflectToAttribute:!0},editable:{type:Boolean,observer:"_editableChanged",reflectToAttribute:!0},contenteditable:{type:Boolean,reflectToAttribute:!0,computed:"_updateContentEditable(editable)"}}}},{key:"ready",value:function(){this.inner=this.innerHTML,console.log(this.inner)}},{key:"_updateInner",value:function(){this.inner=this.innerHTML}},{key:"_activeChanged",value:function(e){console.log("Active property changed")}},{key:"_editableChanged",value:function(e){this.editable||(this.active=!1)}},{key:"_updateContentEditable",value:function(e){return this.addEventListener("keydown",function(){var e=event.keyCode||event.charCode;8===e&&1===this.childElementCount&&"<br>"===this.getElementsByTagName("li")[0].innerHTML&&event.preventDefault()}),this.editable}},{key:"_handleTap",value:function(e){this.editable&&(e.preventDefault(),this.active=!0)}},{key:"_innerChanged",value:function(e){Polymer.dom(this).innerHTML=e}},{key:"listeners",get:function(){return{tap:"_handleTap",blur:"_updateInner"}}},{key:"behaviors",get:function(){return[SimplaConnector]}}]),o}(HTMLUListElement);Polymer(r)}()</script> </dom-module>